# MdViewer 구현 태스크 계획

## Phase 1: 프로젝트 기초 설정

### 태스크
- [x] 1.1 .NET 8.0 WPF 프로젝트 생성
- [x] 1.2 MdXaml, System.Text.Json NuGet 추가
- [x] 1.3 프로젝트 구조 생성 (Services/, Models/ 폴더)

### 검증
- [x] `dotnet build` 성공
- [x] 패키지 복원 확인
- [x] 폴더 구조: Services/, Models/ 존재

---

## Phase 2: 기본 마크다운 뷰어

### 태스크
- [x] 2.1 MainWindow에 MarkdownScrollViewer 배치
- [x] 2.2 명령줄 인자로 파일 경로 받기
- [x] 2.3 마크다운 파일 로드 및 렌더링
- [x] 2.4 코드 블록 폰트 스타일 적용

### 검증
- [x] 앱 실행 시 창 표시
- [x] `MdViewer.exe docs\MdViewer.md` 실행 시 파일 내용 렌더링
- [x] 코드 블록이 고정폭 폰트로 표시

---

## Phase 3: 단축키

### 태스크
- [x] 3.1 Esc 키로 창 닫기
- [x] 3.2 F5 키로 파일 새로고침

### 검증
- [x] Esc 누르면 창 종료
- [x] 파일 수정 후 F5 → 변경 내용 반영

---

## Phase 4: 설정 저장/복원

### 태스크
- [x] 4.1 AppSettings 모델 생성
- [x] 4.2 SettingsService 구현 (JSON 저장/로드)
- [x] 4.3 창 종료 시 크기/위치 저장
- [x] 4.4 앱 시작 시 설정 복원

### 검증
- [x] `%AppData%/MdViewer/settings.json` 파일 생성 확인
- [x] 앱 재시작 시 이전 창 크기/위치 유지

---

## Phase 5: 창 관리 (중복 방지)

### 태스크
- [x] 5.1 WindowManager 구현 (파일-창 매핑)
- [x] 5.2 Named Pipe 서버 구현
- [x] 5.3 Named Pipe 클라이언트 구현
- [x] 5.4 동일 파일 열기 시 기존 창 포커스
- [x] 5.5 다른 파일 열기 시 새 창 생성

### 검증
- [x] 같은 파일 더블클릭 → 새 창 안 생기고 기존 창 활성화
- [x] 다른 md 파일 더블클릭 → 새 창 생성
- [x] 두 번째 인스턴스 실행 시 파일 경로 전송 후 종료

---

## Phase 6: 링크 처리

### 태스크
- [x] 6.1 MdXaml 링크 클릭 이벤트 핸들링
- [x] 6.2 내부 링크 (.md) → 새 창 열기
- [x] 6.3 이미 열린 md 파일 → 기존 창 포커스
- [x] 6.4 외부 링크 (http/https) → 브라우저

### 검증
- [x] md 링크 클릭 → 새 뷰어 창 열림
- [x] 이미 열린 파일 링크 클릭 → 해당 창 활성화
- [x] 웹 링크 클릭 → 기본 브라우저 열림

---

## Phase 7: 파일 연결 등록

### 태스크
- [x] 7.1 FileAssociationService 구현
- [x] 7.2 첫 실행 시 레지스트리 등록

### 검증
- [x] `regedit`에서 `HKCU\Software\Classes\.md` 확인
- [x] 탐색기에서 md 파일 더블클릭 → MdViewer 실행

---

## Phase 8: 예외 처리 및 마무리

### 태스크
- [x] 8.1 파일 없음 오류 처리
- [x] 8.2 파일 읽기 실패 처리
- [x] 8.3 파일 연결 등록 실패 처리

### 검증
- [x] 없는 파일 경로 → 오류 메시지 후 종료
- [x] 권한 없는 파일 → 오류 메시지 표시
- [x] 레지스트리 쓰기 실패 → 경고 후 계속 실행

---

## Phase 9: UI 개선

### 태스크
- [x] 9.1 헤딩(H1~H6) 크기 차별화
- [x] 9.2 본문 폰트 크기 조정 (18px)

### 검증
- [x] H1~H6 크기가 단계별로 다르게 표시
- [x] 본문 텍스트가 18px로 표시

---

## 진행 상황

| Phase | 상태 | 완료일 |
|-------|------|--------|
| Phase 1 | ✅ 완료 | 2025-12-11 |
| Phase 2 | ✅ 완료 | 2025-12-11 |
| Phase 3 | ✅ 완료 | 2025-12-11 |
| Phase 4 | ✅ 완료 | 2025-12-11 |
| Phase 5 | ✅ 완료 | 2025-12-11 |
| Phase 6 | ✅ 완료 | 2025-12-11 |
| Phase 7 | ✅ 완료 | 2025-12-11 |
| Phase 8 | ✅ 완료 | 2025-12-11 |
| Phase 9 | ✅ 완료 | 2025-12-11 |

---

## 스타일 설정

| 항목 | 값 |
|------|-----|
| 본문 폰트 | Malgun Gothic, Segoe UI |
| 본문 크기 | 18px |
| H1 크기 | 28px |
| H2 크기 | 26px |
| H3 크기 | 24px |
| H4 크기 | 22px |
| H5 크기 | 20px |
| H6 크기 | 18px (회색) |
| 코드 블록 폰트 | D2Coding, GulimChe, DotumChe, Consolas |
| 코드 블록 크기 | 13px |
